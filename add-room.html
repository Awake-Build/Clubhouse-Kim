<!DOCTYPE html><!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Mon Jun 13 2022 10:40:35 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="6023743da89ab12a129414b2" data-wf-site="60178db33737f449b5c57dac" lang="en-us">
<head>
  <meta charset="utf-8">
  <title>Add Room</title>
  <meta content="Add Room" property="og:title">
  <meta content="Add Room" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/clubhouse-kim.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["PT Sans:400,400italic,700,700italic","Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic","Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic","Roboto:regular,500"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon"><!--  The core Firebase JS SDK is always required and must be listed first  -->
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-firestore.js"></script>
  <!--  TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries  -->
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-analytics.js"></script>
  <script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyAM319WDfL0l30OQdxpZS9z_MYANTmryP0",
    authDomain: "proven-dialect-286811.firebaseapp.com",
    projectId: "proven-dialect-286811",
    storageBucket: "proven-dialect-286811.appspot.com",
    messagingSenderId: "608072789897",
    appId: "1:608072789897:web:76612d4c8e941c861f7b58",
    measurementId: "G-8SP4HDJFVH",
    databaseURL: "https://proven-dialect-286811-default-rtdb.firebaseio.com/"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>
  <meta name="google-signin-client_id" content="875635847636-6lqmk4qe7246v4ri53hm6dsro8bbg19u.apps.googleusercontent.com">
  <script src="https://cdn.jsdelivr.net/gh/shoptype/Shoptype-JS@2.6.2/shoptype.js"></script>
  <awakesetup platformid="d62ac8ed-3064-6bea-6a00-d6854fef66c4" apikey="bb15a823-1572-494b-8b7d-3a1255e8f94d" refcode="6135e37b298b4210f7ce8ad6" cartcountmatch="#cart-item-count" css="https://firebasestorage.googleapis.com/v0/b/pinkim.appspot.com/o/shoptype-pinkim.css?alt=media&token=1ab0d48a-e982-4c46-ba1e-063f744d0d7f"></awakesetup>
</head>
<body class="body-3">
  <div class="navigation-top">
    <div class="div-block-2">
      <div data-collapse="medium" data-animation="default" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar w-nav">
        <div class="container w-container">
          <a href="index.html" class="brand w-nav-brand"><img src="images/Clubhouse-Kim.svg" loading="lazy" alt=""></a>
          <nav role="navigation" class="nav-menu w-nav-menu">
            <a href="rooms.html" class="nav-link-3 w-nav-link">Rooms</a>
            <a href="about-us.html" class="nav-link-2 w-nav-link">About</a>
            <a href="add-room.html" aria-current="page" class="nav-link w-nav-link w--current">Add Room</a>
            <a href="#" id="logout-button" class="nav-link-copy w-nav-link">Logout</a>
          </nav>
          <div class="menu-button w-nav-button"><img src="images/Burger.svg" loading="lazy" alt=""></div>
        </div>
      </div>
      <div class="main-menu-carticon">
        <div id="cart-item-count" class="div-block-138">0</div><img src="images/cart.svg" loading="lazy" alt="" class="image-18">
      </div>
      <a id="profile-button" href="coseller.html" class="profilebutton w-inline-block"><img src="images/Profile.svg" loading="lazy" id="coseller-profile-img" alt="" class="image-3"></a>
    </div>
  </div>
  <div class="background"></div>
  <div class="div-block-81">
    <h1 class="heading-5">Add a Clubhouse Room</h1>
  </div>
  <div class="div-block-8">
    <div class="form-block w-form">
      <form id="email-form" name="email-form" data-name="Email Form" method="get" class="form">
        <div class="room-details">
          <div>
            <div><label for="email" class="field-label-3">Submit Room Link</label></div>
            <div class="div-block-106">
              <div id="url-error" class="error">X</div><input type="text" class="input-field w-input" maxlength="256" name="url" data-name="url" placeholder="Paste Clubhouse Event link here" id="event-url" required="">
            </div>
          </div>
          <div class="div-block-12">
            <div><label for="name" class="field-label-4">Category</label></div>
            <div><input type="text" class="input-field w-input" maxlength="256" name="title" data-name="title" placeholder="" id="event-category"></div>
          </div>
          <div class="div-block-12">
            <div><label for="name" class="field-label-4">Topic</label></div>
            <div><input type="text" class="input-field w-input" maxlength="256" name="title" data-name="title" placeholder="" id="event-title"></div>
          </div>
          <div>
            <div><label for="email" class="field-label-4">Description</label></div>
            <div><input type="text" class="input-field w-input" maxlength="256" name="description" data-name="description" placeholder="" id="event-description" required=""></div>
          </div>
          <div class="div-block-13">
            <div class="div-block-16"><label for="name" class="field-label-4">Image</label></div>
            <div class="div-block-11">
              <div id="hero-image" class="html-embed w-embed"><input type="file" id="event-img" name="img" accept="image/*" class="input-field" style="border-radius:0px;padding:10px 0px; height:40px"></div>
            </div>
            <div id="url-error" class="error">X</div>
          </div>
          <div class="div-block-13">
            <div class="div-block-16"><label for="name" class="field-label-4">Date</label></div>
            <div class="div-block-11">
              <div class="html-embed w-embed"><input type="datetime-local" id="event-date" name="eventDate" class="input-field" style="border: 1px solid #AAA;padding:0px 20px;"></div>
            </div>
            <div id="date-error" class="error">X</div>
          </div>
        </div>
        <div class="div-block-97">
          <div class="text-block-23">HashTags</div>
          <div class="div-block-98">
            <div id="tags-list" class="div-block-105">
              <div id="tag-template" class="tag-block">
                <div class="tag-text"></div>
                <div class="remove-tag">X</div>
              </div>
            </div><input type="text" class="text-field-2 w-input" maxlength="256" name="field-2" data-name="Field 2" placeholder="Add hashtags separated by comma" id="hashtag-field" required="">
          </div>
          <div class="text-block-23">Other Tag</div>
          <div>
            <div class="div-block-99">
              <div class="div-block-100">
                <div class="text-block-24">Is this location specific?</div>
              </div>
              <div class="boolean-selecter">
                <div id="location-no" class="boolean-no">No</div>
                <div id="location-yes" class="boolean-yes">Yes</div>
              </div>
            </div>
            <div class="div-block-103">
              <div id="country-select-mask" class="country-select-mask"></div>
              <div id="location-selector-box" class="location-select">Select Location</div>
            </div>
          </div>
          <div>
            <div class="div-block-99">
              <div class="div-block-100">
                <div class="text-block-24">Is the room subject 18+?</div>
              </div>
              <div class="boolean-selecter">
                <div id="age-no" class="boolean-no">No</div>
                <div id="age-yes" class="boolean-yes">Yes</div>
              </div>
            </div>
          </div>
        </div>
        <div id="room-moderators" class="room-moderators">
          <div id="moderator-list" class="moderator-list">
            <div id="moderator-000" class="moderator"><img src="images/bc2102d6-db7c-4567-973b-ba42269634ce.png" loading="lazy" id="moderator-image" alt="" class="moderator-image"></div>
          </div>
          <div id="moderator-names" class="moderator-names"></div>
        </div>
        <div class="div-block-79">
          <div id="products-list" class="div-block-82">
            <div id="product-000" class="added-products-block">
              <div class="product-link"><img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Basic/assets/placeholder.60f9b1840c.svg" loading="lazy" alt="" class="product-room-image">
                <div class="product-price">$00.00</div>
                <h3 class="product-title">Heading</h3>
              </div>
            </div>
          </div>
          <h2 class="heading-6">Cosell Links</h2>
          <div class="div-block-80"><input type="text" class="input-field w-input" maxlength="256" name="description" data-name="description" placeholder="" id="product-url" required="">
            <div id="add-product-button" class="add-product-button">Add Product</div>
          </div>
        </div>
      </form>
      <div class="w-form-done">
        <div>Thank you! Your submission has been received!</div>
      </div>
      <div class="w-form-fail">
        <div>Oops! Something went wrong while submitting the form.</div>
      </div>
    </div>
  </div>
  <div class="div-block-18">
    <div id="add-room-button" class="add-room-button">Add Room</div>
  </div>
  <div id="location-mask" class="location-mask">
    <div class="location-select-box">
      <h3 class="heading-12">Enter Location Address</h3>
      <div class="div-block-108">
        <div class="w-embed"><input id="loc-text" type="text" class="input-field" placeholder="Enter Location Address" style="border: 1px solid #AAA;padding:0px 10px"></div>
        <div id="location-list"></div>
      </div>
      <div class="div-block-109">
        <div id="location-select-btn" class="btn">Select</div>
        <div id="location-cancel" class="btn btn-right">Cancel</div>
      </div>
    </div>
  </div>
  <div class="div-block-3">
    <div>
      <div class="div-block-5">
        <a href="index.html" class="link-block w-inline-block"><img src="images/Feed-Ico.svg" loading="lazy" alt="" class="image-2">
          <div class="text-block">Feed</div>
        </a>
        <a href="rooms.html" class="link-block w-inline-block"><img src="images/Rooms-Ico.svg" loading="lazy" alt="" class="image-2">
          <div class="text-block">Rooms</div>
        </a>
        <a href="market.html" class="link-block w-inline-block"><img src="images/Market-Ico.svg" loading="lazy" alt="" class="image-2">
          <div class="text-block">Market</div>
        </a>
        <a href="people.html" class="link-block w-inline-block"><img src="images/People-Ico.svg" loading="lazy" alt="" class="image-2">
          <div class="text-block">People</div>
        </a>
        <a href="winners.html" class="link-block w-inline-block"><img src="images/Win-Ico.svg" loading="lazy" alt="" class="image-2">
          <div class="text-block">Win</div>
        </a>
      </div>
    </div>
  </div>
  <div id="products-list" class="div-block-17">
    <div id="product-000" class="list-product">
      <div class="select-mask"></div>
      <div class="product-link"><img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Basic/assets/placeholder.60f9b1840c.svg" loading="lazy" alt="" class="product-listing-image">
        <div class="product-price">$00.00</div>
        <h3 class="product-title">Heading</h3>
      </div>
    </div>
    <div class="w-embed w-script">
      <script type="text/javascript">
   var pageUrl = new URL(window.location);
   var productsPlatformId = "d62ac8ed-3064-6bea-6a00-d6854fef66c4";
   var productsOffset = 0;
   var productsCount = 100;
   var loadingProducts = false;
   function addProducts(tag){
     if(loadingProducts){return;}
     loadingProducts = true;
     var currency = {"USD":"$", "INR":"₹","GBP":"£"};
     var fetchProductsUrl = "https://backend.shoptype.com/platforms/{pId}/products?count={productsCount}&offset={productsOffset}&tags={tag}";
     fetchProductsUrl = fetchProductsUrl.replace('{pId}',productsPlatformId);
     fetchProductsUrl = fetchProductsUrl.replace('{tag}',tag);
     fetchProductsUrl = fetchProductsUrl.replace('{productsCount}',productsCount);
     fetchProductsUrl = fetchProductsUrl.replace('{productsOffset}',productsOffset);
     fetch(fetchProductsUrl)
       .then(response => response.json())
       .then(productsJson => {
         var productTemplate = document.getElementById("product-000");
         productTemplate.setAttribute("onclick","selectProduct(this)");
         var productListBlock = document.getElementById("products-list");
         if(!productsJson.products){
           loadingProducts=false;
           return;
         }
         for (var i = 0; i < productsJson.products.length; i++) {
           var clone = productTemplate.cloneNode(true);
           var pricePrefix = currency[productsJson.products[i].currency]?" "+currency[productsJson.products[i].currency]:" " + productsJson.products[i].currency;
           //clone.getElementsByClassName('product-link')[0].setAttribute("href", "/product?product-id="+productsJson.products[i].id);
           clone.setAttribute("productId", productsJson.products[i].id);
           clone.setAttribute("id",productsJson.products[i].id);
           clone.getElementsByClassName('product-listing-image')[0].src = productsJson.products[i].primaryImageSrc.imageSrc;
           var variant = productsJson.products[i].variants[0]
           clone.getElementsByClassName('product-price')[0].innerHTML = pricePrefix + variant.discountedPrice;
           if(variant.discountedPrice<variant.price){
             //clone.getElementsByClassName('market-product-price-full')[0].innerHTML =pricePrefix + variant.price;
           }else{
             //clone.getElementsByClassName('market-product-price-full')[0].style.display = 'none';
           }
           clone.getElementsByClassName('product-title')[0].innerHTML = productsJson.products[i].title;
           //clone.getElementsByClassName('market-brand-image')[0].src = vendors[productsJson.products[i].catalogId].logo;
           //clone.getElementsByClassName('market-product-brand')[0].setAttribute("brandId", productsJson.products[i].catalogId);
           productListBlock.appendChild(clone);
         };
         productTemplate.style.display="none";
         loadingProducts=false;
         productsOffset+=productsJson.products.length;
       });
   }
   function selectProduct(productDiv){
   		let selectedProdId = productDiv.getAttribute('productId');
   		if(selectedProducts.includes(selectedProdId)){
      	productDiv.getElementsByClassName("select-mask")[0].setAttribute("class","select-mask");
        removeItemOnce(selectedProducts, selectedProdId);
      }else{
      	selectedProducts.push(selectedProdId);
        productDiv.getElementsByClassName("select-mask")[0].setAttribute("class","select-mask selected-mask");
      }
   }
   function removeItemOnce(arr, value) {
     var index = arr.indexOf(value);
     if (index > -1) {
       arr.splice(index, 1);
     }
     return arr;
   }
   //addProducts("");
</script>
    </div>
  </div>
  <div class="div-block-63">
    <div class="w-embed w-script">
      <script>
  const modImages=[];
  const selectedProducts = [];
  let modNames=[];
  let locationSpecific = false;
  let ageRestrict = false;
  //var database = firebase.database();
  if(!sessionStorage['userId']){
  	showLogin();
  }
	document.getElementById("add-room-button").setAttribute("onclick","saveRoom()");
  document.getElementById("event-url").setAttribute("onchange","urlChanged()");
  document.getElementById("add-product-button").setAttribute("onclick","addProduct()");
  function saveRoom(){
    let roomId = (uuidv4());
    let userId = sessionStorage['userId'];
    let roomTime = new Date(document.getElementById("event-date").value);
    console.info(roomTime);
    let roomTimeStamp = roomTime.getTime()
    let roomTags = getTags();
  	let roomDetails = {
    	id:roomId,
    	userId: userId,
    	title:document.getElementById("event-title").value,
      url:document.getElementById("event-url").value,
      description:document.getElementById("event-description").value,
      date:roomTimeStamp,
      category: document.getElementById("event-category").value,
      modNames:modNames,
      modImages:modImages,
      products:selectedProducts,
      location:locationSpecific,
			locPlace:place,
      locLat:lat,
      locLng: long,
      age: ageRestrict,
      tags: roomTags
    }
  	if(document.getElementById("event-img").files.length>0){
    	uploadBlob(document.getElementById("event-img").files[0], roomDetails);
    }else{
    	saveRoomDetails(roomDetails);
    }
    //window.location.href = "/rooms";
  }
  function uuidv4() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
      return v.toString(16);
    });
  }
  function uploadBlob(file, roomDetails) {
    const ref = firebase.storage().ref().child(roomDetails.id);
    ref.put(file).then((snapshot) => {
      console.log(snapshot._delegate.metadata);
      roomDetails.imageUrl = "https://firebasestorage.googleapis.com/v0/b/proven-dialect-286811.appspot.com/o/"+roomDetails.id+"?alt=media";
    	saveRoomDetails(roomDetails);
    });
  }
  function urlChanged(){
    var newUrl = document.getElementById("event-url").value;
       fetch(newUrl)
      .then(response => response.text())
      .then(xmlString => {
        let string = xmlString.substring(xmlString.indexOf('<div class="container max-w-xl flex flex-col items-center justify-center mx-auto px-4 mb-5">'));
        string = string.substring(0, string.indexOf("</body>")+7);
        let pattern = /(<img[^>]*)>/g;
        let scriptPatern = /<script([\S\s]*?)>([\S\s]*?)<\/script>/ig;
        let svgPatern = /<svg([\S\s]*?)>([\S\s]*?)<\/svg>/ig;
        let imgPatern = /<img([\S\s]*?)\/\/>/ig;
        string = string.replace(pattern, "$1/>"); 
        string = string.replace(scriptPatern, ""); 
        string = string.replace(svgPatern, "");
        string = string.replace(imgPatern, ""); 
        let doc = new DOMParser().parseFromString(string, "text/xml"); console.info(doc);
        let images = doc.getElementsByClassName("px-1");
        if(images && images.length>0){
          let moderatorTemplate = document.getElementById("moderator-000");
          let moderatorList = document.getElementById("moderator-list");
          for (var i = 0; i < images.length; i++) {
          	let style = images[i].childNodes[1].getAttribute("style");
            let imageUrl =""; 
            let newMod = moderatorTemplate.cloneNode(true);
            if(style){
              imageUrl = style.split("'")[1];
            	newMod.getElementsByClassName('moderator-image')[0].src=imageUrl;
            }            
            modImages.push(imageUrl);
            moderatorList.appendChild(newMod);
            document.getElementById("room-moderators").style.display="flex";
          }
          document.getElementById("room-moderators").style.display="block";
          moderatorTemplate.style.display="none";
        }
        let elemList = doc.getElementsByClassName("ml-1");
        let dateTimeArr = elemList[0].innerHTML.split(",")
        let date = dateTimeArr[0];
        let time = dateTimeArr[1];
        time = time.replace("(","").replace(")","");
        if(time.indexOf(":")==-1){
          time = time.replace(/([0-9]:?)/g,"$1:00");
        }
        let roomDateTime = new Date(date + ", 2021 " + time);
        let localDateTime= [roomDateTime.getFullYear(),
                (roomDateTime.getMonth()+1).AddZero(),
                roomDateTime.getDate().AddZero()].join('-') +'T' +
               [roomDateTime.getHours().AddZero(),
                roomDateTime.getMinutes().AddZero()].join(':');
        document.getElementById("event-date").value = localDateTime;
        let createdBy = doc.getElementsByClassName("tracking-widest");
        if(createdBy && createdBy.length>0){
          document.getElementById("event-category").value=createdBy[0].innerHTML.trim();
        }
        let mainTitle = doc.getElementsByClassName("text-lg");
        if(mainTitle){
          document.getElementById("event-title").value = mainTitle[0].innerHTML.trim()
        }
        let descElem = doc.getElementsByClassName("text-sm")[0];
        console.info(descElem.innerHTML);
        let names = descElem.getElementsByTagName("em");
        if(names && names.length>0){
          modNames = names[0].innerHTML.replace("w/ ","").split(", ")
          document.getElementById("moderator-names").innerHTML=modNames.join(",");
          descElem.getElementsByTagName("em")[0].remove();        
        }
        document.getElementById("event-description").value=descElem.innerHTML.trim();
      });
  }
  function saveRoomDetails(roomDetails){
    let db = firebase.firestore();
    db.collection("rooms").doc(roomDetails.id).set(roomDetails)
      .then(() => {
          window.location.href = "/room?roomId=" + roomDetails.id;
      })
      .catch((error) => {
          console.error("Error writing document: ", error);
      });
  }
  function addProduct(){
  	let productUrl = document.getElementById("product-url").value;
    if(productUrl && productUrl!=""){
    	let myRegexp = /([a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12})/i;;
			let match = myRegexp.exec(productUrl);
      if(match.length == 0){
      	alert("Invalid product URL");
      	return;
      }
      fetch("https://backend.shoptype.com/products/" + match[0])
        .then(response => response.json())
        .then(productJson => {
        	if(productJson.message){
          	alert(productJson.message);
          }else{
          	let clone =  document.getElementById("product-000").cloneNode(true);
            clone.style.display="block";
            clone.setAttribute("id", productJson.id);
            selectedProducts.push(productJson.id);
            clone.getElementsByClassName("product-title")[0].innerHTML= productJson.title;
            clone.getElementsByClassName("product-room-image")[0].src= productJson.primaryImageSrc.imageSrc;
            var pricePrefix = currency[productJson.currency]?currency[productJson.currency]:productJson.currency;
          	clone.getElementsByClassName("product-price")[0].innerHTML= pricePrefix+ parseFloat(productJson.variants[0].discountedPrice).toFixed(2);
          	document.getElementById("products-list").appendChild(clone);
            document.getElementById("product-url").value = "";
          }
        });
    }
  }
  Number.prototype.AddZero= function(b,c){
        var  l= (String(b|| 10).length - String(this).length)+1;
        return l> 0? new Array(l).join(c|| '0')+this : this;
  }
</script>
    </div>
    <div class="w-embed w-script">
      <script>
  let place = "";
  let lat = "";
  let long = "";
  document.getElementById("location-no").setAttribute("onclick","onLocationChange(this)");
  document.getElementById("location-yes").setAttribute("onclick","onLocationChange(this)");
  document.getElementById("age-no").setAttribute("onclick","onAgeChange(this)");
  document.getElementById("age-yes").setAttribute("onclick","onAgeChange(this)");
  document.getElementById("hashtag-field").setAttribute("onchange","onTagChange()");
  document.getElementsByClassName("remove-tag")[0].setAttribute("onclick","removeTag(this)");
  document.getElementById("location-selector-box").setAttribute("onclick","showLocation()");
  document.getElementById("location-cancel").setAttribute("onclick","onLocaionCancel()");
  document.getElementById("loc-text").setAttribute("onchange","changeLocation()");
  document.getElementById("location-select-btn").setAttribute("onclick","onLocaionSelect()");
  function onLocationChange(btn){
    if(btn.innerHTML == "Yes"){
      activate(btn, document.getElementById("location-no"));
      document.getElementById("country-select-mask").style.display = "none";
      locationSpecific = true;
    }else{
      activate(btn, document.getElementById("location-yes"))
      document.getElementById("country-select-mask").style.display = "block";
      locationSpecific = false;
    }
  }
  function showLocation(){
    document.getElementById("location-mask").style.display = "flex";
  }
  function onAgeChange(btn){
    if(btn.innerHTML == "Yes"){
      activate(btn, document.getElementById("age-no"));
      ageRestrict = true;
    }else{
      activate(btn, document.getElementById("age-yes"))
      ageRestrict = false;
    }
  }
  function activate(activeBtn, inactiveBtn){
    activeBtn.style.background = "#5377ab";
    activeBtn.style.color = "#FFFFFF";
    inactiveBtn.style.background = "#f2f0e4";
    inactiveBtn.style.color = "#000000";
  }
  function onTagChange(){
    let tags = document.getElementById("hashtag-field").value;
    let tagsArr = tags.split(",");
    let tagTemplate = document.getElementById("tag-template");
    let tagsList = document.getElementById("tags-list");
    let tagCount = document.getElementsByClassName("tag-block").length;
    for(let i = 0; i < tagsArr.length; i++){
      tagsArr[i] = tagsArr[i].trim();
      if(tagsArr[i]!=""){
        let newTag = tagTemplate.cloneNode(true);
        newTag.id = "tag-" + (tagCount+i);    
        newTag.getElementsByClassName("tag-text")[0].innerHTML = tagsArr[i];
        newTag.style.display="flex";
        tagsList.appendChild(newTag);
      }
    }
    document.getElementById("hashtag-field").value = "";
  }
  function removeTag(closeBtn){
    closeBtn.parentNode.remove();
  }
  function getTags(){
    let tags = document.getElementsByClassName("tag-block");
    let tagList = [];
    for(let i = 1; i < tags.length; i++){
      tagList.push(tags[i].getElementsByClassName("tag-text")[0].innerHTML);
    }
    return (tagList);
  }
  function onLocaionClick(){
    document.getElementById("location-mask").style.display = "flex";
  }
  function onLocaionCancel(){
    document.getElementById("location-mask").style.display = "none";
  }
  function getLocation(){
    console.info(place);
    if(place&&place!=""){
      setLocation();
      return;
    }
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition);
      return;
    }
    fetch("https://api.ipify.org/?format=json")
      .then(response => response.json())
      .then(ipJson => {
        fetch("http://api.ipstack.com/"+ipJson.ip+"?access_key=9022073a4a26a038b6fa5a51b182848a")
          .then(response => response.json())
          .then(locationJson => {
            place = locationJson.city +", " + locationJson.region_name + ", " + locationJson.country_name;
            lat = locationJson.latitude;
            long = locationJson.longitude;
            setLocation();
          });
      });
  }
  function setLocation(){
    document.getElementById('location-selector-box').innerHTML = place;
  }
  function showPosition(position) {
    let latLng = position.coords.latitude + ',' + position.coords.longitude;
    fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${latLng}&key=AIzaSyA4E3R0_P7KeCdFbnTLm4gHS2LOcZ6k-7E`)
      .then(response => response.json())
      .then(locationJson => {
        setGMapLocation(locationJson)
      });
  }
  function changeLocation(){
    let address = document.getElementById('loc-text').value;
    fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${address}&key=AIzaSyA4E3R0_P7KeCdFbnTLm4gHS2LOcZ6k-7E`)
      .then(response => response.json())
      .then(locationJson => {
        setGMapLocation(locationJson)
      });
  }
  function setGMapLocation(locationJson){
    let addressList = document.getElementById('location-list');
    removeAllChildNodes(addressList);
    for (var i = 0; i < locationJson.results.length; i++) {
      let div = document.createElement('div');
      div.classList.add('location-selected');
      div.innerHTML = locationJson.results[i].formatted_address;
      div.setAttribute("lat", locationJson.results[i].geometry.location.lat);
      div.setAttribute("lng", locationJson.results[i].geometry.location.lng);
      addressList.appendChild(div)
    }
  }
  function removeAllChildNodes(parent) {
    while (parent.firstChild) {
        parent.removeChild(parent.firstChild);
    }
  }
  function onLocaionSelect(){
    let locationDiv = document.getElementsByClassName("location-selected")[0];
    place = locationDiv.innerHTML;
    lat = locationDiv.getAttribute("lat");
    long = locationDiv.getAttribute("lng");
    setLocation();
    onLocaionCancel();
  }
</script>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=60178db33737f449b5c57dac" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  <script type="text/javascript">
	document.addEventListener("userLogin", function (e) {
		var cosellerStore = firebase.firestore().collection("cosellers");
		var userId = sessionStorage['userId'];
		var cosellerDoc = cosellerStore.doc(userId);
		cosellerDoc.get().then((doc) => {
			if(!doc.exists) {
				let cosellerDetails = {
					id:userId,
					name:sessionStorage['userName'],
					bio:"New to Clubhouse Kim",
					followers: 0,
					following: 0,
					views: 0,
					joiningDate: Date.now()
				}
				updateCosellerDetails(cosellerStore, cosellerDetails);
			}
			let cosellerData = doc.data();
          	if(cosellerData.image && cosellerData.image!=""){
				document.getElementById("coseller-profile-img").src = cosellerData.image;
            }
			updateCosellerMeta(cosellerStore, userId, sessionStorage['token']);
		});
	});
	function updateCosellerDetails(store, cosellerDetails){
		store.doc(cosellerDetails.id).set(cosellerDetails, { merge: true })
			.then(() => {
			})
			.catch((error) => {
				console.error("Error writing document: ", error);
			});
	}
	function updateCosellerMeta(store, userId, token){
		let headerOptions = {
			'headers': {'Authorization': token},
		};
		fetch("https://backend.shoptype.com/coseller-dashboard?viewType=cosellerView&currency=USD", headerOptions)
			.then(response=>response.json())
			.then(userMeta=>{
				let cosellerDetails = {
					id:userId,
				  views: userMeta.total_clicks,
				  total_publishes: userMeta.total_publishes,
				  currency: userMeta.currency,
				  total_commissions: userMeta.total_commissions
				}
				updateCosellerDetails(store, cosellerDetails);
			});
		fetch("https://backend.shoptype.com/coseller-dashboard?viewType=cosellerView&currency=USD", headerOptions)
			.then(response=>response.json())
			.then(userMeta=>{
				let cosellerDetails = {
					id:userId,
				  views: userMeta.total_clicks,
				  total_publishes: userMeta.total_publishes,
				  currency: userMeta.currency,
				  total_commissions: userMeta.total_commissions
				}
				updateCosellerDetails(store, cosellerDetails);
			});
		fetch("https://backend.shoptype.com/referrals", headerOptions)
			.then(response=>response.json())
			.then(userRef=>{
				let cosellerDetails = {
					id:userId,
					referrals: userRef.data.invitees.length
				}
				updateCosellerDetails(store, cosellerDetails);
			});
	}
  function closeCart(){
    checkout = null;
    cartMainFrame.style.right= "-"+cartMainFrame.offsetWidth+"px";
  }
  function hideCartTitle(){
    let cartsList = document.getElementsByClassName("st-vendor-cart");
    let display = "none";
    if(cartsList.length>2){
      display = "flex";
    }
    for(i = 0; i < cartsList.length; i++) {
      cartsList[i].querySelector(".st-cart-title").style.display = display;
    }
  }
  hideCartTitle();
</script>
</body>
</html>