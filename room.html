<!DOCTYPE html><!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Mon Jun 13 2022 10:40:35 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="603e37ba4e3363878fac9acb" data-wf-site="60178db33737f449b5c57dac" lang="en-us">
<head>
  <meta charset="utf-8">
  <title>Room</title>
  <meta content="Room" property="og:title">
  <meta content="Room" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/clubhouse-kim.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["PT Sans:400,400italic,700,700italic","Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic","Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic","Roboto:regular,500"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon"><!--  The core Firebase JS SDK is always required and must be listed first  -->
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-firestore.js"></script>
  <!--  TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries  -->
  <script src="https://www.gstatic.com/firebasejs/8.4.2/firebase-analytics.js"></script>
  <script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyAM319WDfL0l30OQdxpZS9z_MYANTmryP0",
    authDomain: "proven-dialect-286811.firebaseapp.com",
    projectId: "proven-dialect-286811",
    storageBucket: "proven-dialect-286811.appspot.com",
    messagingSenderId: "608072789897",
    appId: "1:608072789897:web:76612d4c8e941c861f7b58",
    measurementId: "G-8SP4HDJFVH",
    databaseURL: "https://proven-dialect-286811-default-rtdb.firebaseio.com/"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>
  <meta name="google-signin-client_id" content="875635847636-6lqmk4qe7246v4ri53hm6dsro8bbg19u.apps.googleusercontent.com">
  <script src="https://cdn.jsdelivr.net/gh/shoptype/Shoptype-JS@2.6.2/shoptype.js"></script>
  <awakesetup platformid="d62ac8ed-3064-6bea-6a00-d6854fef66c4" apikey="bb15a823-1572-494b-8b7d-3a1255e8f94d" refcode="6135e37b298b4210f7ce8ad6" cartcountmatch="#cart-item-count" css="https://firebasestorage.googleapis.com/v0/b/pinkim.appspot.com/o/shoptype-pinkim.css?alt=media&token=1ab0d48a-e982-4c46-ba1e-063f744d0d7f"></awakesetup>
</head>
<body class="body-6 body-2">
  <div class="navigation-top">
    <div class="div-block-2">
      <div data-collapse="medium" data-animation="default" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar w-nav">
        <div class="container w-container">
          <a href="index.html" class="brand w-nav-brand"><img src="images/Clubhouse-Kim.svg" loading="lazy" alt=""></a>
          <nav role="navigation" class="nav-menu w-nav-menu">
            <a href="rooms.html" class="nav-link-3 w-nav-link">Rooms</a>
            <a href="about-us.html" class="nav-link-2 w-nav-link">About</a>
            <a href="add-room.html" class="nav-link w-nav-link">Add Room</a>
            <a href="#" id="logout-button" class="nav-link-copy w-nav-link">Logout</a>
          </nav>
          <div class="menu-button w-nav-button"><img src="images/Burger.svg" loading="lazy" alt=""></div>
        </div>
      </div>
      <div class="main-menu-carticon">
        <div id="cart-item-count" class="div-block-138">0</div><img src="images/cart.svg" loading="lazy" alt="" class="image-18">
      </div>
      <a id="profile-button" href="coseller.html" class="profilebutton w-inline-block"><img src="images/Profile.svg" loading="lazy" id="coseller-profile-img" alt="" class="image-3"></a>
    </div>
  </div>
  <div class="div-block-3">
    <div>
      <div class="div-block-5">
        <a href="index.html" class="link-block w-inline-block"><img src="images/Feed-Ico.svg" loading="lazy" alt="" class="image-2">
          <div class="text-block">Feed</div>
        </a>
        <a href="rooms.html" class="link-block w-inline-block"><img src="images/Rooms-Ico.svg" loading="lazy" alt="" class="image-2">
          <div class="text-block">Rooms</div>
        </a>
        <a href="market.html" class="link-block w-inline-block"><img src="images/Market-Ico.svg" loading="lazy" alt="" class="image-2">
          <div class="text-block">Market</div>
        </a>
        <a href="people.html" class="link-block w-inline-block"><img src="images/People-Ico.svg" loading="lazy" alt="" class="image-2">
          <div class="text-block">People</div>
        </a>
        <a href="winners.html" class="link-block w-inline-block"><img src="images/Win-Ico.svg" loading="lazy" alt="" class="image-2">
          <div class="text-block">Win</div>
        </a>
      </div>
    </div>
  </div>
  <div class="background"></div>
  <div class="div-block-83">
    <div id="room-template" class="ch-room-copy ch-room">
      <a href="#" class="app-link w-inline-block">
        <div class="div-block-61">
          <h2 class="room-category">Heading</h2>
        </div>
        <div class="st-cart-title">
          <div class="div-block-51"><img src="images/bc2102d6-db7c-4567-973b-ba42269634ce.png" loading="lazy" alt="" class="room-image"></div>
          <div class="div-block-53">
            <h3 class="room-title">Heading</h3>
          </div>
        </div>
        <div class="div-block-59">
          <div class="room-description">This is some text inside of a div block.</div>
        </div>
        <div class="div-block-56">
          <div class="st-cart-title-copy">
            <div><img src="images/speaker-01.png" loading="lazy" alt="" class="image-7"></div>
            <div class="room-people"> (0) people tuned in</div>
          </div>
          <div class="div-block-58">
            <div><img src="images/clock.png" loading="lazy" alt="" class="image-7"></div>
            <div class="room-date"> datetime</div>
          </div>
        </div>
        <div class="mod-list">
          <div class="text-block-3">Moderators:</div>
          <div class="mod-image"><img src="images/Profile.svg" loading="lazy" alt="" class="room-mod-image2"></div>
        </div>
      </a>
    </div>
    <div id="chat-window" class="chat-room-mask">
      <div id="chat-room" class="chat-room">
        <div id="chat-close-btn" class="chat-close">X</div>
        <div id="comments-title" class="comments-title">Comments</div>
        <div id="chat-messages" class="div-block-127">
          <div id="chat-message-000" class="chat-message">
            <div class="chat-user-name">KC</div>
            <div class="chat-user-message">Message</div>
          </div>
        </div>
        <div class="div-block-125">
          <div class="html-embed-4 w-embed"><input id="chat-txt" type="text" style="width:100%;height:100%;border-style: none;border-radius:15px 0px 0px 15px;padding:0px 10px;background-color:transparent;" placeholder="enter message" rows="5"></div>
          <div id="add-message-button" class="add-message-button">Chat<br>‚Äç</div>
        </div>
        <div id="open-chat" class="div-block-129"><img src="images/comments-open.png" loading="lazy" alt="" class="image-25"></div>
      </div>
    </div>
    <div class="cosell-products">
      <div>
        <h5 class="heading-2">COSELL DEALS</h5>
      </div>
      <div id="cosell-productlist2" class="cosell-productlist2">
        <div id="list-product-000" class="list-product-2-copy">
          <a href="#" class="product-link w-inline-block"><img src="https://d3e54v103j8qbb.cloudfront.net/plugins/Basic/assets/placeholder.60f9b1840c.svg" loading="lazy" alt="" class="product-listing-image">
            <div class="product-price">$00.00</div>
            <h3 class="product-title2">Heading</h3>
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="w-embed w-script">
    <style>
.product-title2{
	width:calc(100% - 120px);
}
</style>
    <script>
  let url = new URL(window.location);
  let roomId= url.searchParams.get("roomId")??"";
  let chatCount=0;
	const chatDbRef = firebase.database().ref("messages/"+roomId);
  let db = firebase.firestore();
  document.getElementById("add-message-button").setAttribute("onclick","postChat()");
  document.getElementById("chat-txt").setAttribute("onfocus","showChat()");
  document.getElementById("chat-close-btn").setAttribute("onclick","hideChat()");
  document.getElementById("open-chat").setAttribute("onclick","showChat()");
  var docRef = db.collection("rooms").doc(roomId);
  docRef.get().then((doc) => {
    if (doc.exists) {
      let room = doc.data();
      var currentRoom = document.getElementById('room-template');
      if(room.imageUrl){
      	currentRoom.getElementsByClassName('room-image')[0].src = room.imageUrl;
      }
      currentRoom.getElementsByClassName('room-category')[0].innerHTML = room.category;
      currentRoom.getElementsByClassName('room-title')[0].innerHTML = room.title;
      currentRoom.getElementsByClassName('room-description')[0].innerHTML = room.description;
      let eventDate = new Date(room.date);			
			var hours = Math.abs(Date.now() - eventDate) / 36e5;
      if(hours<2){
     		currentRoom.getElementsByClassName('app-link')[0].href = room.url.replace("/www.","/ios."); 
      }else{
      	currentRoom.getElementsByClassName('app-link')[0].href = "#";
      }
      currentRoom.getElementsByClassName('app-link')[0].href = room.url.replace("/www.","/ios."); 
      currentRoom.getElementsByClassName('room-date')[0].innerHTML = eventDate.toLocaleDateString() + " " + eventDate.toLocaleTimeString();
      let productTemplate = document.getElementById('list-product-000');
      let productList = document.getElementById('cosell-productlist2');
      if(room.products){
        for(var j =0; j<room.products.length; j++){
          let newProduct = productTemplate.cloneNode(true);
          addProduct(room.products[j], newProduct);
          productList.appendChild(newProduct);
        }
        productTemplate.style.display="none";
      }else{
        currentRoom.getElementsByClassName('cosell-products')[0].style.display="none";
      }
      let modImageTemplate = currentRoom.getElementsByClassName('mod-image')[0];
      let modImageList = currentRoom.getElementsByClassName('mod-list')[0];
      console.info(modImageTemplate);
      if(room.modImages){
        for(var j =0; j<room.modImages.length; j++){
          let newMod = modImageTemplate.cloneNode(true);
          newMod.getElementsByClassName("room-mod-image2")[0].src = room.modImages[j];
          modImageList.appendChild(newMod);
        }
        modImageTemplate.style.display="none";
      }
    }
    else {
      console.log("No data available");
    }
  });
  function loadChat(roomId) {
    var jsElm = document.createElement("script");
    jsElm.type = "application/javascript";
    jsElm.src = "https://chat.relaychat.app?button_color=ffffff&path=clubhouse.kim/room/"+roomId;
    document.body.appendChild(jsElm);
	}
  function addProduct(productId, productNode){
    fetch("https://backend.shoptype.com/products/"+productId)
      .then(response => response.json())
      .then(productJson => {
        productNode.getElementsByClassName("product-link")[0].href = "/product?product-id=" + productId;
        productNode.getElementsByClassName("product-title2")[0].innerHTML= productJson.title;
        productNode.getElementsByClassName("product-listing-image")[0].src= productJson.primaryImageSrc.imageSrc;
        var pricePrefix = currency[productJson.currency]?currency[productJson.currency]:productJson.currency;
        productNode.getElementsByClassName("product-price")[0].innerHTML= pricePrefix+ parseFloat(productJson.variants[0].discountedPrice).toFixed(2);
      });
  }
  function postChat() {
    if(sessionStorage["userId"] && sessionStorage["userId"]!=""){
      const timestamp = Date.now();
      const chatTxt = document.getElementById("chat-txt");
      const message = chatTxt.value;
      chatTxt.value = "";
      if(message!=""){
        firebase.database().ref("messages/" + roomId + "/" + timestamp).set({
          usr: sessionStorage["userName"],
          usrId: sessionStorage["userId"],
          msg: message,
        });
      }
    }else{
      showLogin();
    }
  }
  function showChat(){
  	let chatMask = document.getElementById("chat-window");
    chatMask.style.position = "fixed";
    chatMask.style.zIndex= 3;
    chatMask.style.top = "60px";
    chatMask.style.bottom = "60px";
    document.getElementById("chat-room").style.borderRadius = "20px";
    document.getElementById("chat-room").style.backgroundColor = "#FFFFFF";
    document.getElementById("chat-messages").style.height = "600px";
    document.getElementById("chat-close-btn").style.display = "block";
    document.getElementById("open-chat").style.display = "none";
    changeMessageDisp("flex");
  }
  function hideChat(){
  	let chatMask = document.getElementById("chat-window");
    chatMask.style.position = "relative";
    chatMask.style.zIndex = 0;
    chatMask.style.top = "";
    chatMask.style.bottom = "";
    document.getElementById("chat-room").style.borderRadius = "0px 0px 20px 20px";
    document.getElementById("chat-room").style.backgroundColor = "";
    document.getElementById("chat-messages").style.height = "";
    document.getElementById("chat-close-btn").style.display = "";
    document.getElementById("open-chat").style.display = "block";
    changeMessageDisp("none");
  }
	function changeMessageDisp(display){
  	let chatMessages = document.getElementsByClassName("chat-message");
    for (var i = 1; i < chatMessages .length-1; i++) {
      chatMessages[i].style.display = display;
    }
  }
  function convert(message){
	  var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
	  var text1=message.replace(exp, "<a href='$1'>$1</a>");
	  var exp2 =/(^|[^\/])(www\.[\S]+(\b|$))/gim;
	  return text1.replace(exp2, '$1<a target="_blank" href="http://$2">$2</a>');
  }
  chatDbRef.on("child_added", function (snapshot) {
    let messageTemplate = document.getElementById("chat-message-000");
    const messages = snapshot.val();
    chatCount++;
		document.getElementById("comments-title").innerHTML = `Comments (${chatCount})`;
    let newMessage = messageTemplate.cloneNode(true);
    let messageList = document.getElementById("chat-messages");
    newMessage.id="message-" + chatCount;
    newMessage.style.display = "flex";
    newMessage.querySelector(".chat-user-name").innerHTML= messages.usr.split(" ").map((n)=>n[0]).join("");
    newMessage.querySelector(".chat-user-message").innerHTML= convert(messages.msg);
    messageList.insertBefore(newMessage, messageList.firstChild);
    messageList.scrollTop = 0;
    if(document.getElementById("chat-close-btn").style.display==""){
    	changeMessageDisp("none");
    }
  });
  window.onresize = function() {
    document.getElementById("chat-messages").style.maxHeight = (window.innerHeight-300) + "px";
  };
  document.getElementById("chat-messages").style.maxHeight = (window.innerHeight-300) + "px";
</script>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=60178db33737f449b5c57dac" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  <script type="text/javascript">
	document.addEventListener("userLogin", function (e) {
		var cosellerStore = firebase.firestore().collection("cosellers");
		var userId = sessionStorage['userId'];
		var cosellerDoc = cosellerStore.doc(userId);
		cosellerDoc.get().then((doc) => {
			if(!doc.exists) {
				let cosellerDetails = {
					id:userId,
					name:sessionStorage['userName'],
					bio:"New to Clubhouse Kim",
					followers: 0,
					following: 0,
					views: 0,
					joiningDate: Date.now()
				}
				updateCosellerDetails(cosellerStore, cosellerDetails);
			}
			let cosellerData = doc.data();
          	if(cosellerData.image && cosellerData.image!=""){
				document.getElementById("coseller-profile-img").src = cosellerData.image;
            }
			updateCosellerMeta(cosellerStore, userId, sessionStorage['token']);
		});
	});
	function updateCosellerDetails(store, cosellerDetails){
		store.doc(cosellerDetails.id).set(cosellerDetails, { merge: true })
			.then(() => {
			})
			.catch((error) => {
				console.error("Error writing document: ", error);
			});
	}
	function updateCosellerMeta(store, userId, token){
		let headerOptions = {
			'headers': {'Authorization': token},
		};
		fetch("https://backend.shoptype.com/coseller-dashboard?viewType=cosellerView&currency=USD", headerOptions)
			.then(response=>response.json())
			.then(userMeta=>{
				let cosellerDetails = {
					id:userId,
				  views: userMeta.total_clicks,
				  total_publishes: userMeta.total_publishes,
				  currency: userMeta.currency,
				  total_commissions: userMeta.total_commissions
				}
				updateCosellerDetails(store, cosellerDetails);
			});
		fetch("https://backend.shoptype.com/coseller-dashboard?viewType=cosellerView&currency=USD", headerOptions)
			.then(response=>response.json())
			.then(userMeta=>{
				let cosellerDetails = {
					id:userId,
				  views: userMeta.total_clicks,
				  total_publishes: userMeta.total_publishes,
				  currency: userMeta.currency,
				  total_commissions: userMeta.total_commissions
				}
				updateCosellerDetails(store, cosellerDetails);
			});
		fetch("https://backend.shoptype.com/referrals", headerOptions)
			.then(response=>response.json())
			.then(userRef=>{
				let cosellerDetails = {
					id:userId,
					referrals: userRef.data.invitees.length
				}
				updateCosellerDetails(store, cosellerDetails);
			});
	}
  function closeCart(){
    checkout = null;
    cartMainFrame.style.right= "-"+cartMainFrame.offsetWidth+"px";
  }
  function hideCartTitle(){
    let cartsList = document.getElementsByClassName("st-vendor-cart");
    let display = "none";
    if(cartsList.length>2){
      display = "flex";
    }
    for(i = 0; i < cartsList.length; i++) {
      cartsList[i].querySelector(".st-cart-title").style.display = display;
    }
  }
  hideCartTitle();
</script>
</body>
</html>